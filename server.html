<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CONNECT=PROXY</title>
    <link rel="icon" type="image/x-icon" href="assets/img/google.png" />
    <link href="https://fonts.googleapis.com/css?family=Orbitron:400,700|Montserrat:400,700&display=swap" rel="stylesheet" />
    <style>
      * {margin: 0; padding: 0; box-sizing: border-box; -webkit-box-sizing: border-box; -moz-box-sizing: border-box;}
      html, body {width: 100%; height: 100%; font-family: 'Montserrat', sans-serif; color: #ffffff; overflow: hidden; display: flex; justify-content: center; align-items: center; background: #000; background-image: linear-gradient(150deg, #0d0d2b, #000, #0d0d2b);}
      #bgCanvas {position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2; background: transparent;}
      body::after {content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url("assets/img/stars.png") repeat; opacity: 0.2; z-index: -1;}
      .header-container {width: 90%; max-width: 1200px; padding: 80px 100px; border-radius: 20px; background-color: rgba(0,0,0,0.7); box-shadow: 0 8px 16px rgba(0,0,0,0.9); text-align: center; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); position: relative; z-index: 10;}
      .header {font-family: 'Orbitron', sans-serif; font-size: 4rem; font-weight: 700; margin-bottom: 20px; color: #4fc3f7; text-shadow: 0 4px 8px rgba(0,0,0,0.8); letter-spacing: 2px;}
      .description {font-size: 1.75rem; margin-bottom: 30px; color: #a8d0e6; letter-spacing: 1px;}
      .input {font-size: 1.5rem; padding: 15px 20px; width: 80%; max-width: 500px; border-radius: 30px; border: none; outline: none; background: rgba(255,255,255,0.1); color: #e0e0e0; text-align: center; transition: all 0.3s ease-in-out;}
      .input::placeholder {color: #b0c4de; text-align: center;}
      .input:focus {background: rgba(255,255,255,0.15); box-shadow: 0 0 12px #4fc3f7; transform: scale(1.05);}
      @media screen and (max-width: 1024px) {.header-container {padding: 60px 80px;} .header {font-size: 3.5rem;} .description {font-size: 1.5rem;} .input {font-size: 1.3rem; padding: 12px 16px;}}
      @media screen and (max-width: 768px) {.header-container {padding: 40px 60px;} .header {font-size: 3rem;} .description {font-size: 1.3rem;} .input {font-size: 1.1rem; padding: 10px 14px;}}
    </style>
  </head>
  <body>
    <canvas id="bgCanvas"></canvas>
    <div class="header-container">
      <h1 class="header">CONNECT=PROXY</h1>
      <p class="description">HELLO CONNECT</p>
      <input type="text" class="input" id="searchInput" name="search" placeholder="Search or enter a URL..." />
    </div>
    <script src="./uv/uv.bundle.js"></script>
    <script src="./uv/uv.config.js"></script>
    <script src="./assets/register-sw.js"></script>
    <script src="./assets/script.js" defer></script>
    <script>
      window.addEventListener("load", function(){
        const canvas = document.getElementById("bgCanvas");
        const ctx = canvas.getContext("2d");
        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;
        window.addEventListener("resize", function(){
          width = canvas.width = window.innerWidth;
          height = canvas.height = window.innerHeight;
        });
        const formulas = ["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca"];
        function rand(min, max){ return Math.random() * (max - min) + min; }
        class Atom {
          constructor(){
            this.x = rand(0, width);
            this.y = rand(0, height);
            this.vx = rand(-0.5, 0.5);
            this.vy = rand(-0.5, 0.5);
            this.radius = rand(20, 40);
            this.orbitRadius = this.radius + 10;
            this.electronCount = Math.floor(rand(1, 4));
            this.orbitAngle = rand(0, Math.PI * 2);
            this.orbitSpeed = rand(0.005, 0.02);
            this.formula = formulas[Math.floor(rand(0, formulas.length))];
            this.color = "hsl(" + Math.floor(rand(0, 360)) + ",80%,50%)";
            this.fusionDelay = 0;
          }
          update(){
            this.x += this.vx;
            this.y += this.vy;
            if(this.x < this.radius || this.x > width - this.radius){ this.vx *= -1; }
            if(this.y < this.radius || this.y > height - this.radius){ this.vy *= -1; }
            this.orbitAngle += this.orbitSpeed;
            if(this.fusionDelay > 0){ this.fusionDelay--; }
          }
          draw(ctx){
            let grad = ctx.createRadialGradient(this.x, this.y, this.radius * 0.1, this.x, this.y, this.radius);
            grad.addColorStop(0, this.color);
            grad.addColorStop(1, "#000");
            ctx.fillStyle = grad;
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
            ctx.fill();
            ctx.font = "bold " + (this.radius * 0.9) + "px Orbitron";
            ctx.fillStyle = "#ffffff";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.fillText(this.formula, this.x, this.y);
            for(let i = 0; i < this.electronCount; i++){
              let angle = this.orbitAngle + (Math.PI * 2 * i / this.electronCount);
              let ex = this.x + this.orbitRadius * Math.cos(angle);
              let ey = this.y + this.orbitRadius * Math.sin(angle);
              ctx.fillStyle = "#fff";
              ctx.beginPath();
              ctx.arc(ex, ey, 5, 0, Math.PI * 2);
              ctx.fill();
              ctx.font = "10px sans-serif";
              ctx.fillText("電子", ex + 8, ey + 8);
            }
            if(this.radius >= 30){
              ctx.font = "10px sans-serif";
              ctx.fillStyle = "#ffdd00";
              ctx.fillText("陽子", this.x - this.radius / 2, this.y - this.radius / 2);
              ctx.fillStyle = "#00ffdd";
              ctx.fillText("中性子", this.x + this.radius / 2, this.y + this.radius / 2);
            }
          }
        }
        let atoms = [];
        for(let i = 0; i < 20; i++){ atoms.push(new Atom()); }
        function fuseAtoms(a1, a2){
          let newAtom = new Atom();
          newAtom.x = (a1.x + a2.x) / 2;
          newAtom.y = (a1.y + a2.y) / 2;
          newAtom.vx = (a1.vx + a2.vx) / 2;
          newAtom.vy = (a1.vy + a2.vy) / 2;
          newAtom.radius = Math.min(80, Math.sqrt(a1.radius * a1.radius + a2.radius * a2.radius));
          newAtom.orbitRadius = newAtom.radius + 10;
          newAtom.electronCount = a1.electronCount + a2.electronCount;
          newAtom.formula = a1.formula + "+" + a2.formula;
          newAtom.color = "hsl(" + Math.floor(rand(0,360)) + ",80%,50%)";
          newAtom.fusionDelay = 30;
          return newAtom;
        }
        function update(){
          ctx.clearRect(0, 0, width, height);
          for(let i = 0; i < atoms.length; i++){ atoms[i].update(); }
          for(let i = 0; i < atoms.length; i++){
            for(let j = i + 1; j < atoms.length; j++){
              let dx = atoms[i].x - atoms[j].x;
              let dy = atoms[i].y - atoms[j].y;
              let dist = Math.sqrt(dx * dx + dy * dy);
              if(dist < (atoms[i].radius + atoms[j].radius) * 0.5 && atoms[i].fusionDelay === 0 && atoms[j].fusionDelay === 0){
                let fused = fuseAtoms(atoms[i], atoms[j]);
                atoms[i] = fused;
                atoms.splice(j, 1);
                break;
              }
            }
          }
          for(let k = 0; k < atoms.length; k++){ atoms[k].draw(ctx); }
          requestAnimationFrame(update);
        }
        update();
      });
    </script>
  </body>
</html>
